<!DOCTYPE html>
<h lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Hakathon</title>

    <!-- LINK TO BOOTSTRAP  AND STYLESHEET -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    <link href="style.css" rel="stylesheet"></link>

</head>
<body>
  <section class="login" id="login">
    <hr><br><br>
    <div class="title">
      <h1 class="text-center">Create an Account</h1>
      <br>
      <div class="reservations-container">
          <form id="loginForm">
              <div class="mb-3">
                  <label for="username" class="form-label">Username (Use your Email address)</label>
                  <span><input type="text" class="form-control" placeholder="Enter Email address" id="username"></span>
              </div>
              <div class="mb-3">
                  <label for="password" class="form-label">Password</label>
                  <input type="password" class="form-control" placeholder="Enter password" id="password">
              </div>
              <button type="button" class="btn btn-outline-primary" id="register">Create an Account</button>
          </form>
      </div>
    </div>
  </section>    
</body>
<footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
      $(document).ready(function(){
          $("#register").click(function(){
              var usrname = $("#username").val();
              var pw = $("#password").val();
              data={
                  username: usrname,
                  password: pw
              }
              $.ajax({
              type: 'POST',
              url: 'http://localhost:3000/users/register',
              data: JSON.stringify(data),
              contentType: "application/json; charset=utf-8",
              success: function(response, textStatus, xhr) {
                  if (response.message == "User registered") {
                      sessionStorage.setItem('username', response.user.username);
                      sessionStorage.setItem('token', response.user.token);
                      window.location.href = "index.html";
                  } else {
                      alert(response.message);
                  }
              },
              error: function(xhr, textStatus, errorMsg) {
                  alert(errorMsg);
              }
          });  
          });
      });
  </script>
</footer>
</html>
